(function(){"use strict";var t={6499:function(t,e,a){a(2406);var s=a(9864),i=(a(9578),a(6631)),n=(a(5603),a(4398)),r=(a(3096),a(2628)),o=(a(4072),a(3481)),l=(a(289),a(3142)),c=(a(3970),a(140)),u=(a(3255),a(797)),d=(a(1062),a(9342)),p=(a(2680),a(4995)),m=(a(6530),a(5094)),g=(a(7983),a(4269)),h=(a(4809),a(9858)),v=(a(2210),a(4159)),f=(a(2685),a(7165)),b=a(6369),_=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},k=[],w={async created(){}},Z=w,y=a(1001),x=(0,y.Z)(Z,_,k,!1,null,null,null),C=x.exports,P=a(2631),$=function(){var t=this,e=t._self._c;return e("div",{staticClass:"login-page"},[e("van-nav-bar",{attrs:{title:"面筋登陆"}}),e("van-form",{on:{submit:t.onSubmit}},[e("van-field",{attrs:{name:"username",label:"用户名",placeholder:"用户名",rules:[{required:!0,message:"请填写用户名"},{pattern:/\w{3,}/,message:"用户名至少3位"}]},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),e("van-field",{attrs:{type:"password",name:"password",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请填写密码"},{pattern:/^\w{6,}/,message:"密码需要包含大小写数字"}]},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),e("div",{staticStyle:{margin:"16px"}},[e("van-button",{attrs:{block:"",type:"info","native-type":"submit"}},[t._v("登陆")])],1)],1),e("router-link",{staticClass:"link",attrs:{to:"/register"}},[t._v("注册账号")])],1)},F=[],L=(a(7658),a(70));const S="my-token-vant-mobile",j=()=>localStorage.getItem(S),A=t=>{localStorage.setItem(S,t)},O=()=>{localStorage.removeItem(S)},T=L.ZP.create({baseURL:"http://interview-api-t.itheima.net/h5/",timeout:5e3});T.interceptors.request.use((function(t){return t.headers.Authorization=`Bearer ${j()}`,t}),(function(t){return Promise.reject(t)})),T.interceptors.response.use((function(t){return t.data}),(function(t){return t.response&&(401===t.response.status?(O(),(0,d.Z)("请重新登陆"),Dt.push("/login")):(0,d.Z)(t.response.data.message)),Promise.reject(t)}));var E=T;const I=t=>E.post("user/register",t),q=t=>E.post("user/login",t),B=()=>E.get("user/currentUser"),M=()=>E.get("/user/logout");var H={name:"login-page",data(){return{username:"",password:""}},methods:{async onSubmit(t){const{data:e}=await q(t);A(e.token),this.$toast.success("登陆成功"),this.$router.push("/")}}},U=H,z=(0,y.Z)(U,$,F,!1,null,"3a4a3f5b",null),Q=z.exports,R=function(){var t=this,e=t._self._c;return e("div",{staticClass:"login-page"},[e("van-nav-bar",{attrs:{title:"面筋注册"}}),e("van-form",{on:{submit:t.onSubmit}},[e("van-field",{attrs:{name:"username",label:"用户名",placeholder:"用户名",rules:[{required:!0,message:"请填写用户名"},{pattern:/\w{3,}/,message:"用户名至少3位"}]},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),e("van-field",{attrs:{type:"password",name:"password",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请填写密码"},{pattern:/^\w{6,}/,message:"密码需要包含大小写数字"}]},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),e("div",{staticStyle:{margin:"16px"}},[e("van-button",{attrs:{block:"",type:"primary","native-type":"submit"}},[t._v("注册")])],1)],1),e("router-link",{staticClass:"link",attrs:{to:"/login"}},[t._v("已有账号,去登陆")])],1)},D=[],G={name:"login-page",data(){return{username:"",password:""}},methods:{async onSubmit(t){await I(t),this.$toast("注册成功了"),this.$router.push("/login")}}},J=G,K=(0,y.Z)(J,R,D,!1,null,"1b3ba8ca",null),N=K.exports,V=function(){var t=this,e=t._self._c;return e("div",{staticClass:"article-detail-page"},[e("nav",{staticClass:"nav"},[e("van-nav-bar",{attrs:{title:"面筋详情","left-text":"返回",fixed:""},on:{"click-left":function(e){return t.$router.go(-1)}}})],1),e("header",{staticClass:"header"},[e("h1",[t._v(t._s(t.message.stem))]),e("p",[t._v(" "+t._s(t.message.createdAt)+" | 浏览量 "+t._s(t.message.views)+" | 点赞数 "+t._s(t.message.likeCount)+" ")]),e("p",[e("img",{attrs:{src:t.message.avatar}}),e("span",[t._v(t._s(t.message.creator))])])]),e("main",{staticClass:"body",domProps:{innerHTML:t._s(t.message.content)}}),e("div",{staticClass:"opt"},[e("van-icon",{attrs:{name:t.message.likeFlag?"like":"like-o",color:"rgb(255,113,0)"},on:{click:t.toogleLike}}),e("van-icon",{attrs:{name:t.message.collectFlag?"star":"star-o",color:"rgb(255,113,0)"},on:{click:t.toogleCollect}})],1)])},W=[];const X=t=>E.get("interview/query",{params:t}),Y=t=>E.get("interview/opt/list",{params:{optType:2,...t}}),tt=t=>E.get("interview/opt/list",{params:{optType:1,...t}}),et=t=>E.get("interview/show",{params:{id:t}}),at=t=>E.post("/interview/opt",{id:t,optType:1});var st={name:"detail-page",data(){return{message:()=>({}),like:!1,star:!1}},async created(){const{data:t}=await et(this.$route.params.id);this.message=t},methods:{async toogleLike(){await at(this.message.id),this.message.likeFlag=!this.message.likeFlag,this.message.likeFlag?(this.$toast.success("点赞成功"),this.message.likeCount++):(this.$toast.success("取消点赞"),this.message.likeCount--),console.log(this.message.likeFlag)},async toogleCollect(){await at(this.message.id),this.message.collectFlag=!this.message.collectFlag,this.message.collectFlag?this.$toast.success("收藏成功"):this.$toast.success("取消成功"),console.log(this.message.likeFlag)}}},it=st,nt=(0,y.Z)(it,V,W,!1,null,"2225405b",null),rt=nt.exports,ot=function(){var t=this,e=t._self._c;return e("div",{staticClass:"layout-page"},[e("router-view"),e("van-tabbar",{attrs:{route:""},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[e("van-tabbar-item",{attrs:{to:"/article",icon:"fire-o"}},[t._v("面经")]),e("van-tabbar-item",{attrs:{to:"/collect",icon:"star-o"}},[t._v("收藏")]),e("van-tabbar-item",{attrs:{to:"/like",icon:"like-o",badge:"99+"}},[t._v("喜欢")]),e("van-tabbar-item",{attrs:{to:"/user",icon:"user-o"}},[t._v("我的")])],1)],1)},lt=[],ct={name:"layout-page",data(){return{active:0}}},ut=ct,dt=(0,y.Z)(ut,ot,lt,!1,null,"32632030",null),pt=dt.exports,mt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"like-page"},[e("van-nav-bar",{attrs:{title:"面筋喜欢",fixed:""}}),e("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(t){return e("ArticleItem",{key:t.id,attrs:{item:t}})})),1)],1)},gt=[],ht={name:"like-page",data(){return{page:1,loading:!1,finished:!1,list:[]}},methods:{async onLoad(){const{data:t}=await tt({page:this.page});this.list.push(...t.rows),this.page++,this.loading=!1,this.page>t.pageTotal&&(this.finished=!0)}}},vt=ht,ft=(0,y.Z)(vt,mt,gt,!1,null,"51152ea3",null),bt=ft.exports,_t=function(){var t=this,e=t._self._c;return e("div",{staticClass:"article-page"},[e("nav",{staticClass:"my-nav van-hairline--bottom"},[e("a",{class:"weight_desc"===t.sorter?"active":"",attrs:{href:"javascript:;"},on:{click:function(e){return t.changeSorter("weight_desc")}}},[t._v("推荐")]),e("a",{class:{active:null===t.sorter},attrs:{href:"javascript:;"},on:{click:function(e){return t.changeSorter(null)}}},[t._v("最新")]),t._m(0)]),e("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(t){return e("ArticleItem",{key:t.id,attrs:{item:t}})})),1)],1)},kt=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"logo"},[e("img",{attrs:{src:a(5096),alt:""}})])}],wt=function(){var t=this,e=t._self._c;return e("van-cell",{on:{click:function(e){return t.$router.push(`/detail/${t.item.id}`)}},scopedSlots:t._u([{key:"title",fn:function(){return[e("div",{staticClass:"head"},[e("img",{attrs:{src:"http://teachoss.itheima.net/heimaQuestionMiniapp/%E5%AE%98%E6%96%B9%E9%BB%98%E8%AE%A4%E5%A4%B4%E5%83%8F%402x.png",alt:""}}),e("div",{staticClass:"con"},[e("p",{staticClass:"title"},[t._v(t._s(t.item.stem))]),e("p",{staticClass:"other"},[t._v(t._s(t.item.creator)+" | "+t._s(t.item.createdAt))])])])]},proxy:!0},{key:"label",fn:function(){return[e("div",{staticClass:"body van-multi-ellipsis--l2"},[t._v(" "+t._s(t.clearHTML(t.item.content))+" ")]),e("div",{staticClass:"foot"},[t._v("点赞 "+t._s(t.item.likeCount)+" | 浏览 "+t._s(t.item.views))])]},proxy:!0}])})},Zt=[],yt={props:{item:{type:Object,default:()=>({})}},methods:{clearHTML(t){return t.replace(/<[^>]+>/g,"")}}},xt=yt,Ct=(0,y.Z)(xt,wt,Zt,!1,null,"1e460b98",null),Pt=Ct.exports,$t={name:"article-page",data(){return{finished:!1,loading:!1,list:[],current:1,sorter:"weight_desc"}},methods:{async onLoad(){const{data:t}=await X({current:this.current,sorter:this.sorter});this.list.push(...t.rows),this.current++,this.loading=!1,this.current>t.pageTotal&&(this.finished=!0)},changeSorter(t){this.list=[],this.sorter=t,this.finished=!1,this.loading=!0,this.current=1,this.onLoad()}},components:{ArticleItem:Pt},async created(){}},Ft=$t,Lt=(0,y.Z)(Ft,_t,kt,!1,null,"a3c0418a",null),St=Lt.exports,jt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"collect-page"},[e("van-nav-bar",{attrs:{title:"面筋收藏",fixed:""}}),e("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(t){return e("ArticleItem",{key:t.id,attrs:{item:t}})})),1)],1)},At=[],Ot={name:"collect-page",data(){return{loading:!1,finished:!1,page:1,list:[]}},components:{ArticleItem:Pt},methods:{async onLoad(){const{data:t}=await Y({page:this.page});this.list.push(...t.rows),this.loading=!1,this.page++,this.page>t.pageTotal&&(this.finished=!0)}}},Tt=Ot,Et=(0,y.Z)(Tt,jt,At,!1,null,"17c98c23",null),It=Et.exports,qt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"user-page"},[e("div",{staticClass:"user"},[e("img",{attrs:{src:t.avatar}}),e("h3",[t._v(t._s(t.username))])]),e("van-grid",{attrs:{"column-num":"3"}},[e("van-grid-item",{attrs:{icon:"clock-o",text:"历史记录",to:"/"}}),e("van-grid-item",{attrs:{icon:"bookmark-o",text:"我的收藏",to:"/collect"}}),e("van-grid-item",{attrs:{icon:"thumb-circle-o",text:"我的点赞",to:"/like"}})],1),e("van-cell-group",[e("van-cell",{attrs:{title:"推荐分享","right-icon":"arrow","is-link":""}}),e("van-cell",{attrs:{title:"意见分享","right-icon":"arrow","is-link":""}}),e("van-cell",{attrs:{title:"关于我们","right-icon":"arrow","is-link":""}}),e("van-cell",{attrs:{title:"退出登陆","right-icon":"arrow","is-link":""},on:{click:t.clickFn}})],1)],1)},Bt=[],Mt={name:"user-page",data(){return{avatar:"",username:""}},async created(){const{data:t}=await B();[this.avatar,this.username]=[t.avatar,t.username]},methods:{async clickFn(){this.$toast.success("请重新登陆"),await M(),O(),this.$router.push("/login")}}},Ht=Mt,Ut=(0,y.Z)(Ht,qt,Bt,!1,null,"61a17c62",null),zt=Ut.exports;b.ZP.use(P.ZP);const Qt=new P.ZP({routes:[{path:"/login",component:Q},{path:"/register",component:N},{path:"/detail/:id",component:rt},{path:"/",component:pt,redirect:"article",children:[{path:"/article",component:St},{path:"/like",component:bt},{path:"/collect",component:It},{path:"/user",component:zt}]}]}),Rt=["/login","/register"];Qt.beforeEach(((t,e,a)=>{const s=j();s||Rt.includes(t.path)?a():a("/login")}));var Dt=Qt;b.ZP.use(f.Z),b.ZP.use(v.Z),b.ZP.use(h.Z),b.ZP.use(g.Z),b.ZP.use(m.Z),b.ZP.use(p.Z),b.ZP.use(d.Z),b.ZP.use(u.Z),b.ZP.use(c.Z),b.ZP.use(l.Z),b.ZP.use(o.Z),b.ZP.use(r.Z),b.ZP.use(n.Z),b.ZP.use(i.Z),b.ZP.use(s.Z),b.ZP.config.productionTip=!1,new b.ZP({router:Dt,render:t=>t(C)}).$mount("#app")},5096:function(t,e,a){t.exports=a.p+"img/logo.dbd40807.jpg"}},e={};function a(s){var i=e[s];if(void 0!==i)return i.exports;var n=e[s]={exports:{}};return t[s](n,n.exports,a),n.exports}a.m=t,function(){var t=[];a.O=function(e,s,i,n){if(!s){var r=1/0;for(u=0;u<t.length;u++){s=t[u][0],i=t[u][1],n=t[u][2];for(var o=!0,l=0;l<s.length;l++)(!1&n||r>=n)&&Object.keys(a.O).every((function(t){return a.O[t](s[l])}))?s.splice(l--,1):(o=!1,n<r&&(r=n));if(o){t.splice(u--,1);var c=i();void 0!==c&&(e=c)}}return e}n=n||0;for(var u=t.length;u>0&&t[u-1][2]>n;u--)t[u]=t[u-1];t[u]=[s,i,n]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var s in e)a.o(e,s)&&!a.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.p=""}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,s){var i,n,r=s[0],o=s[1],l=s[2],c=0;if(r.some((function(e){return 0!==t[e]}))){for(i in o)a.o(o,i)&&(a.m[i]=o[i]);if(l)var u=l(a)}for(e&&e(s);c<r.length;c++)n=r[c],a.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return a.O(u)},s=self["webpackChunkhm_vant_h5"]=self["webpackChunkhm_vant_h5"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(6499)}));s=a.O(s)})();
//# sourceMappingURL=app.c5dd9d9d.js.map